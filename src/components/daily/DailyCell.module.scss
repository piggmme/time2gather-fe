@use "../../styles/variables.scss" as *;

.cell {
  user-select: none;
  padding: 0 16px;
  border-radius: 0;
  border: none;
  border-top: 1px solid #e0e0e0;
  background: #fff;
  transition: 0.15s;
  cursor: default;
  display: flex;
  align-items: center;
  justify-content: center;
  height: 30px;
  min-height: 30px;
  box-sizing: border-box;
  flex-shrink: 0;
  touch-action: none; // 모바일에서 스크롤 방지

  &:hover {
    background: #f9f9f9;
  }

  &.selected {
    background: $primary-color-selected;
    backdrop-filter: blur(4px);
  }

  &.dragged {
    background: $primary-color-dragged;
    backdrop-filter: blur(4px);
  }

  // 정각: 실선
  &.fullHour {
    border-top: 1px solid #e0e0e0;
  }

  // 30분: 점선
  &.halfHour {
    border-top: 1px dashed #e0e0e0;
  }

  // count가 있는 경우 빨간색 배경 적용 (selected나 dragged가 아닐 때만)
  &.hasCount:not(.selected):not(.dragged) {
    background-color: $c-red-light;
    opacity: calc(0.2 + var(--intensity, 0) * 0.6);
  }

  // count와 selected가 겹치는 경우 보라색 배경 적용
  // 파란색과 빨간색을 겹쳐서 보라색으로 표현
  &.hasCount.selected {
    background: $c-purple;
    opacity: calc(0.2 + var(--intensity, 0) * 0.6);
  }

  // count와 dragged가 겹치는 경우 보라색 배경 적용 (더 연하게)
  &.hasCount.dragged {
    background: $c-purple-light;
    opacity: calc(0.2 + var(--intensity, 0) * 0.6);
  }

  // 뷰어 모드
  &.viewMode {
    cursor: pointer;

    &:hover {
      background: $c-gray-lightest;
    }
  }
}

