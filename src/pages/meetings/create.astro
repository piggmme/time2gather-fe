---
import Layout from '../../layouts/Layout.astro';
import DatesStep from '../../components/meetings/DatesStep';
import TimeRangeStep from '../../components/meetings/TimeRangeStep';
import TitleStep from '../../components/meetings/TitleStep';
import DescriptionStep from '../../components/meetings/DescriptionStep';
import { getLocaleFromAstroRequest, getTranslations, defaultLocale } from '../../i18n';

type Step = 'title' | 'description' | 'dates' | 'timeRange';
const step: Step = Astro.url.searchParams.get('step') as Step || 'title';
const locale = getLocaleFromAstroRequest(Astro.cookies) || defaultLocale;
const t = getTranslations(locale);
---

<Layout>
  <main>
    <h1>{t('createMeeting.title')}</h1>
    <div class="content">
      {step === 'title' && <TitleStep client:only="react" />}
      {step === 'description' && <DescriptionStep client:only="react" />}
      {step === 'dates' && <DatesStep client:only="react" />}
      {step === 'timeRange' && <TimeRangeStep client:only="react" />}
    </div>
  </main>
</Layout>

<style>
  main {
    width: 100%;
    max-width: 600px;
    margin: 0 auto;
    @media (max-width: 699px) {
      box-sizing: border-box;
      min-height: calc(100svh - 70px);
      position: relative;
    }
  }
  .content {
    width: 100%;
    margin: 0 auto;
  }
</style>